<!DOCTYPE html>
<html>
<head>
	 <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.blue_grey-pink.min.css" />
	 <link rel="stylesheet" href="/css/styles.css">
	 <title>Have you met Flynn?</title>
	 <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	 
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Max Malm">
</head>
<body>

   <div class="demo-blog mdl-layout mdl-js-layout has-drawer is-upgraded">
      <main class="mdl-layout__content">
        <div class="demo-blog__posts mdl-grid">

			<div class="demo-back">
	          <a class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" href="/" title="go back" role="button">
	            <i class="material-icons" role="presentation">arrow_back</i>
	          </a>
	        </div>
          <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">
            <div class="mdl-card__media mdl-color-text--grey-50"
               
                style="background-image: url('/assets/flynn_bg.jpg')" 
              >
              <h3>Have you met Flynn?</h3>
            </div>
            <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
              <div class="section-spacer"></div>
              <div class="meta__favorites">
                425 <i class="material-icons" role="presentation">favorite</i>
                <span class="visuallyhidden">favorites</span>
              </div>
              <div>
                <i class="material-icons" role="presentation">bookmark</i>
                <span class="visuallyhidden">bookmark</span>
              </div>
              <div>
                <i class="material-icons" role="presentation">share</i>
                <span class="visuallyhidden">share</span>
              </div>
            </div>
            <div class="mdl-color-text--grey-700 mdl-card__supporting-text">
              

<p>Yesterday Heroku announced the good bye to free tier as we know it. The short story is, free tier was abused by people pinging their dynos to stay alive <sup>24</sup>&frasl;<sub>7</sub> (they went to sleep after an hour of inactivity before), and now they introduced a hobby tier which is basically the same as the old free tier (without the sleep) for $7 a month. Pretty good deal, but I already have so much server power on premise that I feel I can&rsquo;t justify paying another provider to host my stuff.</p>

<p>I started thinking about how I could set up my own cluster, looking at talk on Docker, Kubernetes and Mesos. It all seemed a bit over my head. It all looked great but I couldn&rsquo;t really find any resources where to begin, where to put down the shovel and dig. The talks went in-depth and over my head, so many terms I haven&rsquo;t heard of before. Then in a comment someone mentioned it.</p>

<p>Today I met Flynn.</p>

<blockquote>
<p>Throw away the duct tape. Say hello to Flynn.</p>

<p>Flynn fixes everything that&rsquo;s wrong with the process of deploying, scaling, and managing your applications. So they run the way they&rsquo;re supposed to â€“ with ease. And you can do more of what you want to do and less of what you have to do.</p>
</blockquote>

<p>This is what Flynn promises when you reach <a href="https://flynn.io/">https://flynn.io/</a></p>

<p>I guess you could say Flynn is your own Heroku hosted by you. Your own PaaS on premise or in the cloud. Why I make the Heroku comparsion is because I come from Heroku to Flynn, but that&rsquo;s not all:</p>

<ul>
<li>You can use Heroku buildpacks <code>BUILDPACK_URL=https://github.com/AdmitHub/meteor-buildpack-horse.git</code></li>
<li>Deploying with git is a thing with Flynn - <code>git push flynn master</code></li>
<li>Pull repositories from your Github account with a read only token (see screenshot further down below)</li>
</ul>

<h2 id="deploy-a-meteor-application-to-flynn:0fb3f36d2f801773c96c5bdeb80ae105">Deploy a Meteor application to Flynn</h2>

<pre><code>meteor create --example todos
cd todos
git init
git add .
git commit -m &quot;partytime&quot;
flynn create todos
flynn env set BUILDPACK_URL=https://github.com/AdmitHub/meteor-buildpack-horse.git
flynn env set MONGO_URL=mongodb://xxx:yyy@ds039078.mongolab.com:39078/heroku_app000000
flynn env set ROOT_URL=http://todos.your.cluster.domain
git push flynn master
</code></pre>

<p>And like that it&rsquo;s done, your app is running on Flynn. It even supports sticky sessions if you want to run it on multiple containers.</p>

<pre><code>flynn route add http -s todos-web --sticky mydomain.com
flynn scale web=3
</code></pre>

<p>From the docs (<a href="https://flynn.io/docs/cli#route):">https://flynn.io/docs/cli#route):</a><br />
<code>--sticky</code> enable cookie-based sticky routing (http only)</p>

<p>I will try this with <a href="https://github.com/meteorhacks/cluster">https://github.com/meteorhacks/cluster</a> when I have the time</p>

<h2 id="screenshots:0fb3f36d2f801773c96c5bdeb80ae105">Screenshots</h2>

<p><img src="/assets/flynn_dashboard.png" alt="Dashboard" /></p>

<blockquote>
<p>The dashboard</p>
</blockquote>

<p><img src="/assets/flynn_github.png" alt="Deploy from Github" /></p>

<blockquote>
<p>Deploy from Github</p>
</blockquote>

<p><img src="/assets/flynn_infoscreen.png" alt="DSadmin" /></p>

<blockquote>
<p>Digital Signage admin, a Meteor application running on Flynn</p>
</blockquote>

<p>I moved one of my less business critical application to Flynn, a Meteor app for controlling our digital signage screens, and it works really well. A few kinks had to be sorted out, but most problems was due to me not reading the docs good enough. Flynn doesn&rsquo;t have a MongoDB component yet (there&rsquo;s only a postgres for now) so I took the moment to try out MongoDB MMS and deploy a cluster on promise. All in all it took a few hours from starting reading about Flynn to deploying an app.</p>

            </div>
          </div>
         </div>

        <footer class="mdl-mini-footer">
          <div class="mdl-mini-footer--left-section">
            
              <a href="https://github.com/benjick" class="mdl-button mdl-js-button mdl-mini-footer--social-btn social-btn social-btn__github">
                <span class="visuallyhidden">Github</span>
              </a>
            
            
            
              <a href="https://facebook.com/maxmalm" class="mdl-button mdl-js-button mdl-mini-footer--social-btn social-btn social-btn__facebook">
                <span class="visuallyhidden">Facebook</span>
              </a>
            

            
              <a href="https://twitter.com/benjick" class="mdl-button mdl-js-button mdl-mini-footer--social-btn social-btn social-btn__twitter">
                <span class="visuallyhidden">Twitter</span>
              </a>
            
            

            
              <a href="https://plus.google.com/u/1/+MaxMalm" class="mdl-button mdl-js-button mdl-mini-footer--social-btn social-btn social-btn__gplus">
                <span class="visuallyhidden">Google plus</span>
              </a>
            
          </div>
          
        </footer>
      </main>
      <div class="mdl-layout__obfuscator"></div>
    </div>
	<script src="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.min.js"></script>
<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
